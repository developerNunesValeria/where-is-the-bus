import { __decorate, __metadata } from "tslib";
import { Component, Input, Output, ViewChild, ContentChild, OnInit, AfterViewChecked, OnDestroy, NgZone, ElementRef, EventEmitter, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';
import { Directionality } from '@angular/cdk/bidi';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { fromEvent, Observable, Subject } from 'rxjs';
import { auditTime, filter, map, pairwise, pluck, takeUntil, tap } from 'rxjs/operators';
import { ScrollViewport } from './scroll-viewport';
import { SmoothScrollElement, SmoothScrollManager, SmoothScrollToOptions } from 'ngx-scrollbar/smooth-scroll';
import { ScrollbarManager } from './utils/scrollbar-manager';
let NgScrollbar = class NgScrollbar {
    constructor(el, zone, changeDetectorRef, dir, smoothScroll, manager) {
        this.el = el;
        this.zone = zone;
        this.changeDetectorRef = changeDetectorRef;
        this.dir = dir;
        this.smoothScroll = smoothScroll;
        this.manager = manager;
        this._disabled = false;
        this._sensorDisabled = this.manager.globalOptions.sensorDisabled;
        this._pointerEventsDisabled = this.manager.globalOptions.pointerEventsDisabled;
        this._viewportPropagateMouseMove = this.manager.globalOptions.viewportPropagateMouseMove;
        /** A class forwarded to scrollable viewport element */
        this.viewClass = this.manager.globalOptions.viewClass;
        /** A class forwarded to the scrollbar track element */
        this.trackClass = this.manager.globalOptions.trackClass;
        /** A class forwarded to the scrollbar thumb element */
        this.thumbClass = this.manager.globalOptions.thumbClass;
        /** Minimum scrollbar thumb size */
        this.minThumbSize = this.manager.globalOptions.minThumbSize;
        /** The duration which the scrolling takes to reach its target when scrollbar rail is clicked */
        this.trackClickScrollDuration = this.manager.globalOptions.trackClickScrollDuration;
        /**
         * Sets the pointer events method
         * Use viewport pointer events  to handle dragging and track click (This makes scrolling work when mouse is over the scrollbar)
         * Use scrollbar pointer events to handle dragging and track click
         */
        this.pointerEventsMethod = this.manager.globalOptions.pointerEventsMethod;
        /**
         * Sets the supported scroll track of the viewport, there are 3 options:
         *
         * - `vertical` Use both vertical and horizontal scrollbar
         * - `horizontal` Use both vertical and horizontal scrollbar
         * - `all` Use both vertical and horizontal scrollbar
         */
        this.track = this.manager.globalOptions.track;
        /**
         * When to show the scrollbar, and there are 3 options:
         *
         * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar
         * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering
         * - `always` Scrollbars are always shown even if the viewport is not scrollable
         */
        this.visibility = this.manager.globalOptions.visibility;
        /**
         *  Sets the appearance of the scrollbar, there are 2 options:
         *
         * - `standard` (default) scrollbar space will be reserved just like with native scrollbar.
         * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.
         */
        this.appearance = this.manager.globalOptions.appearance;
        /**
         * Sets the position of each scrollbar, there are 4 options:
         *
         * - `native` (Default) Use the default position like in native scrollbar.
         * - `invertY` Inverts vertical scrollbar position
         * - `invertX` Inverts Horizontal scrollbar position
         * - `invertAll` Inverts both scrollbar positions
         */
        this.position = this.manager.globalOptions.position;
        /** Debounce interval for detecting changes via ResizeObserver */
        this.sensorDebounce = this.manager.globalOptions.sensorDebounce;
        /** Scroll Audit Time */
        this.scrollAuditTime = this.manager.globalOptions.scrollAuditTime;
        /** Steam that emits when scrollbar is updated */
        this.updated = new EventEmitter();
        /** Set of attributes added on the scrollbar wrapper */
        this.state = {};
        /** Stream that destroys components' observables */
        this.destroyed = new Subject();
    }
    /** Disable custom scrollbar and switch back to native scrollbar */
    get disabled() {
        return this._disabled;
    }
    set disabled(disabled) {
        this._disabled = coerceBooleanProperty(disabled);
    }
    /** Whether ResizeObserver is disabled */
    get sensorDisabled() {
        return this._sensorDisabled;
    }
    set sensorDisabled(disabled) {
        this._sensorDisabled = coerceBooleanProperty(disabled);
    }
    /** A flag used to enable/disable the scrollbar thumb dragged event */
    get pointerEventsDisabled() {
        return this._pointerEventsDisabled;
    }
    set pointerEventsDisabled(disabled) {
        this._pointerEventsDisabled = coerceBooleanProperty(disabled);
    }
    /** Enable viewport mousemove event propagation (only when pointerEventsMethod="viewport") */
    get viewportPropagateMouseMove() {
        return this._viewportPropagateMouseMove;
    }
    set viewportPropagateMouseMove(disabled) {
        this._viewportPropagateMouseMove = coerceBooleanProperty(disabled);
    }
    get nativeElement() {
        return this.el.nativeElement;
    }
    /**
     * Update local state with each change detection
     */
    updateState() {
        let verticalUsed = false;
        let horizontalUsed = false;
        let isVerticallyScrollable = false;
        let isHorizontallyScrollable = false;
        // Check if vertical scrollbar should be displayed
        if (this.track === 'all' || this.track === 'vertical') {
            isVerticallyScrollable = this.viewport.scrollHeight > this.viewport.clientHeight;
            verticalUsed = this.visibility === 'always' || isVerticallyScrollable;
        }
        // Check if horizontal scrollbar should be displayed
        if (this.track === 'all' || this.track === 'horizontal') {
            isHorizontallyScrollable = this.viewport.scrollWidth > this.viewport.clientWidth;
            horizontalUsed = this.visibility === 'always' || isHorizontallyScrollable;
        }
        // Update inner wrapper attributes
        this._updateState({
            position: this.position,
            track: this.track,
            appearance: this.appearance,
            visibility: this.visibility,
            deactivated: this.disabled,
            dir: this.dir.value,
            pointerEventsMethod: this.pointerEventsMethod,
            verticalUsed,
            horizontalUsed,
            isVerticallyScrollable,
            isHorizontallyScrollable
        });
    }
    _updateState(state) {
        this.state = Object.assign(Object.assign({}, this.state), state);
        this.changeDetectorRef.detectChanges();
    }
    getScrolledByDirection(property) {
        let event;
        return this.scrolled.pipe(tap((e) => event = e), pluck('target', property), pairwise(), filter(([prev, curr]) => prev !== curr), map(() => event));
    }
    /**
     * Set hovered state if a scrollbar is being hovered
     */
    setHovered(hovered) {
        this.zone.run(() => this._updateState(Object.assign({}, hovered)));
    }
    /**
     * Set dragging state if a scrollbar is being dragged
     */
    setDragging(dragging) {
        this.zone.run(() => this._updateState(Object.assign({}, dragging)));
    }
    /**
     * Set clicked state if a scrollbar track is being click
     */
    setClicked(scrollbarClicked) {
        this.zone.run(() => this._updateState({ scrollbarClicked }));
    }
    ngOnInit() {
        // Set the viewport based on user choice
        this.zone.runOutsideAngular(() => {
            if (this.customViewPort) {
                this.viewport = this.customViewPort;
                this.defaultViewPort.setAsWrapper();
            }
            else {
                this.viewport = this.defaultViewPort;
            }
            // Activate the selected viewport
            this.viewport.setAsViewport(this.viewClass);
            let scrollStream = fromEvent(this.viewport.nativeElement, 'scroll', { passive: true });
            // Throttle scroll event if 'scrollAuditTime' is set
            scrollStream = this.scrollAuditTime ? scrollStream.pipe(auditTime(this.scrollAuditTime)) : scrollStream;
            // Initialize scroll streams
            this.scrolled = new Observable((subscriber) => scrollStream.pipe(takeUntil(this.destroyed)).subscribe(subscriber));
            this.verticalScrolled = this.getScrolledByDirection('scrollTop');
            this.horizontalScrolled = this.getScrolledByDirection('scrollLeft');
        });
    }
    ngAfterViewChecked() {
        this.updateState();
    }
    ngOnDestroy() {
        this.destroyed.next();
        this.destroyed.complete();
    }
    /**
     * Update local state and the internal scrollbar controls
     */
    update() {
        if (!this.state.horizontalUsed) {
            // Auto-height: Set component height to content height
            this.nativeElement.style.height = `${this.viewport.contentHeight}px`;
        }
        this.updated.next();
        this.changeDetectorRef.detectChanges();
    }
    /**
     * Smooth scroll functions
     */
    scrollTo(options) {
        return this.smoothScroll.scrollTo(this.viewport.nativeElement, options);
    }
    /**
     * Scroll to element by reference or selector
     */
    scrollToElement(target, options) {
        return this.smoothScroll.scrollToElement(this.viewport.nativeElement, target, options);
    }
};
NgScrollbar.ctorParameters = () => [
    { type: ElementRef },
    { type: NgZone },
    { type: ChangeDetectorRef },
    { type: Directionality },
    { type: SmoothScrollManager },
    { type: ScrollbarManager }
];
__decorate([
    Input(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Boolean])
], NgScrollbar.prototype, "disabled", null);
__decorate([
    Input(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Boolean])
], NgScrollbar.prototype, "sensorDisabled", null);
__decorate([
    Input(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Boolean])
], NgScrollbar.prototype, "pointerEventsDisabled", null);
__decorate([
    Input(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Boolean])
], NgScrollbar.prototype, "viewportPropagateMouseMove", null);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgScrollbar.prototype, "viewClass", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgScrollbar.prototype, "trackClass", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgScrollbar.prototype, "thumbClass", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], NgScrollbar.prototype, "minThumbSize", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], NgScrollbar.prototype, "trackClickScrollDuration", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgScrollbar.prototype, "pointerEventsMethod", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgScrollbar.prototype, "track", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgScrollbar.prototype, "visibility", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgScrollbar.prototype, "appearance", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgScrollbar.prototype, "position", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], NgScrollbar.prototype, "sensorDebounce", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], NgScrollbar.prototype, "scrollAuditTime", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], NgScrollbar.prototype, "updated", void 0);
__decorate([
    ViewChild(ScrollViewport, { static: true }),
    __metadata("design:type", ScrollViewport)
], NgScrollbar.prototype, "defaultViewPort", void 0);
__decorate([
    ContentChild(ScrollViewport, { static: true }),
    __metadata("design:type", ScrollViewport)
], NgScrollbar.prototype, "customViewPort", void 0);
NgScrollbar = __decorate([
    Component({
        selector: 'ng-scrollbar',
        exportAs: 'ngScrollbar',
        template: "<div class=\"ng-scrollbar-wrapper\" [ngAttr]=\"state\">\n  <div class=\"ng-scroll-viewport-wrapper\"\n       (resizeSensor)=\"update()\"\n       [sensorDebounce]=\"sensorDebounce\"\n       [sensorDisabled]=\"sensorDisabled\">\n    <div scrollViewport\n         hideNativeScrollbar>\n      <div>\n        <ng-content></ng-content>\n      </div>\n    </div>\n  </div>\n  <ng-container *ngIf=\"!disabled\">\n    <scrollbar-x *ngIf=\"state.horizontalUsed\"\n                 [attr.scrollable]=\"state.isHorizontallyScrollable\"\n                 [attr.fit]=\"state.verticalUsed\">\n    </scrollbar-x>\n    <scrollbar-y *ngIf=\"state.verticalUsed\"\n                 [attr.scrollable]=\"state.isVerticallyScrollable\"\n                 [attr.fit]=\"state.horizontalUsed\">\n    </scrollbar-y>\n  </ng-container>\n</div>\n\n",
        changeDetection: ChangeDetectionStrategy.OnPush,
        host: { '[class.ng-scrollbar]': 'true' },
        styles: ["::ng-deep .ng-scrollbar-measure{left:0;overflow:scroll;position:fixed;top:-9999px;scrollbar-width:none;-ms-overflow-style:none}::ng-deep .ng-scrollbar-measure::-webkit-scrollbar{display:none}:host{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0, 0, 0, 0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);--scrollbar-thumb-transition:height ease-out 150ms,width ease-out 150ms;--scrollbar-track-transition:height ease-out 150ms,width ease-out 150ms;display:block;position:relative;height:100%;max-height:100%;max-width:100%}:host>.ng-scrollbar-wrapper{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}:host>.ng-scrollbar-wrapper[verticalDragging=true],:host>.ng-scrollbar-wrapper[verticalHovered=true]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[horizontalDragging=true],:host>.ng-scrollbar-wrapper[horizontalHovered=true]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:0;bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:var(--scrollbar-total-size);bottom:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{scrollbar-width:none;-ms-overflow-style:none}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport::-webkit-scrollbar,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport::-webkit-scrollbar{display:none}:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{bottom:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{left:0;right:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{right:0;left:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]>.scrollbar-control{opacity:0;transition-property:opacity;transition-duration:.4s;transition-delay:.8s}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:active>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:focus>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:hover>.scrollbar-control{opacity:1;transition-duration:.4s;transition-delay:0s}:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper{overflow:hidden}.ng-scroll-viewport{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position}::ng-deep .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer,.ng-scroll-viewport-wrapper,.ng-scrollbar-wrapper,::ng-deep .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}", "::ng-deep .ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}::ng-deep .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}::ng-deep .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}"]
    }),
    __metadata("design:paramtypes", [ElementRef,
        NgZone,
        ChangeDetectorRef,
        Directionality,
        SmoothScrollManager,
        ScrollbarManager])
], NgScrollbar);
export { NgScrollbar };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctc2Nyb2xsYmFyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXNjcm9sbGJhci8iLCJzb3VyY2VzIjpbImxpYi9uZy1zY3JvbGxiYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUNMLE1BQU0sRUFDTixTQUFTLEVBQ1QsWUFBWSxFQUNaLE1BQU0sRUFDTixnQkFBZ0IsRUFDaEIsU0FBUyxFQUNULE1BQU0sRUFDTixVQUFVLEVBQ1YsWUFBWSxFQUNaLGlCQUFpQixFQUNqQix1QkFBdUIsRUFDeEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzlELE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFjLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNsRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxtQkFBbUIsRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBVzlHLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBVTdELElBQWEsV0FBVyxHQUF4QixNQUFhLFdBQVc7SUEwSHRCLFlBQ1UsRUFBYyxFQUNkLElBQVksRUFDWixpQkFBb0MsRUFDcEMsR0FBbUIsRUFDbkIsWUFBaUMsRUFDbEMsT0FBeUI7UUFMeEIsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUNkLFNBQUksR0FBSixJQUFJLENBQVE7UUFDWixzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FB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Qy9DLElBQUksRUFBRSxFQUFFLHNCQUFzQixFQUFFLE1BQU0sRUFBRTs7S0FDekMsQ0FBQztxQ0E0SGMsVUFBVTtRQUNSLE1BQU07UUFDTyxpQkFBaUI7UUFDL0IsY0FBYztRQUNMLG1CQUFtQjtRQUN6QixnQkFBZ0I7R0FoSXZCLFdBQVcsQ0FzUXZCO1NBdFFZLFdBQVciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIElucHV0LFxuICBPdXRwdXQsXG4gIFZpZXdDaGlsZCxcbiAgQ29udGVudENoaWxkLFxuICBPbkluaXQsXG4gIEFmdGVyVmlld0NoZWNrZWQsXG4gIE9uRGVzdHJveSxcbiAgTmdab25lLFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneVxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERpcmVjdGlvbmFsaXR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2JpZGknO1xuaW1wb3J0IHsgY29lcmNlQm9vbGVhblByb3BlcnR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcbmltcG9ydCB7IGZyb21FdmVudCwgT2JzZXJ2YWJsZSwgU3Vic2NyaWJlciwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgYXVkaXRUaW1lLCBmaWx0ZXIsIG1hcCwgcGFpcndpc2UsIHBsdWNrLCB0YWtlVW50aWwsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IFNjcm9sbFZpZXdwb3J0IH0gZnJvbSAnLi9zY3JvbGwtdmlld3BvcnQnO1xuaW1wb3J0IHsgU21vb3RoU2Nyb2xsRWxlbWVudCwgU21vb3RoU2Nyb2xsTWFuYWdlciwgU21vb3RoU2Nyb2xsVG9PcHRpb25zIH0gZnJvbSAnbmd4LXNjcm9sbGJhci9zbW9vdGgtc2Nyb2xsJztcbi8vIFVuY29tbWVudCB0aGUgZm9sbG93aW5nIGxpbmUgaW4gZGV2ZWxvcG1lbnQgbW9kZVxuLy9pbXBvcnQgeyBTbW9vdGhTY3JvbGxFbGVtZW50LCBTbW9vdGhTY3JvbGxNYW5hZ2VyLCBTbW9vdGhTY3JvbGxUb09wdGlvbnMgfSBmcm9tICcuLi8uLi9zbW9vdGgtc2Nyb2xsL3NyYy9wdWJsaWNfYXBpJztcbmltcG9ydCB7XG4gIFNjcm9sbGJhckFwcGVhcmFuY2UsXG4gIFNjcm9sbGJhclRyYWNrLFxuICBTY3JvbGxiYXJQb3NpdGlvbixcbiAgU2Nyb2xsYmFyVmlzaWJpbGl0eSxcbiAgTmdTY3JvbGxiYXJTdGF0ZSxcbiAgU2Nyb2xsYmFyUG9pbnRlckV2ZW50c01ldGhvZFxufSBmcm9tICcuL25nLXNjcm9sbGJhci5tb2RlbCc7XG5pbXBvcnQgeyBTY3JvbGxiYXJNYW5hZ2VyIH0gZnJvbSAnLi91dGlscy9zY3JvbGxiYXItbWFuYWdlcic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25nLXNjcm9sbGJhcicsXG4gIGV4cG9ydEFzOiAnbmdTY3JvbGxiYXInLFxuICB0ZW1wbGF0ZVVybDogJ25nLXNjcm9sbGJhci5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJ25nLXNjcm9sbGJhci5zY3NzJywgJ3Njcm9sbGJhci9zaGFyZWQuc2NzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgaG9zdDogeyAnW2NsYXNzLm5nLXNjcm9sbGJhcl0nOiAndHJ1ZScgfVxufSlcbmV4cG9ydCBjbGFzcyBOZ1Njcm9sbGJhciBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgT25EZXN0cm95IHtcblxuICBwcml2YXRlIF9kaXNhYmxlZDogYm9vbGVhbiB8IHVuZGVmaW5lZCA9IGZhbHNlO1xuICBwcml2YXRlIF9zZW5zb3JEaXNhYmxlZDogYm9vbGVhbiB8IHVuZGVmaW5lZCA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnNlbnNvckRpc2FibGVkO1xuICBwcml2YXRlIF9wb2ludGVyRXZlbnRzRGlzYWJsZWQ6IGJvb2xlYW4gfCB1bmRlZmluZWQgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5wb2ludGVyRXZlbnRzRGlzYWJsZWQ7XG4gIHByaXZhdGUgX3ZpZXdwb3J0UHJvcGFnYXRlTW91c2VNb3ZlOiBib29sZWFuIHwgdW5kZWZpbmVkID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudmlld3BvcnRQcm9wYWdhdGVNb3VzZU1vdmU7XG5cbiAgLyoqIERpc2FibGUgY3VzdG9tIHNjcm9sbGJhciBhbmQgc3dpdGNoIGJhY2sgdG8gbmF0aXZlIHNjcm9sbGJhciAqL1xuICBASW5wdXQoKVxuICBnZXQgZGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xuICB9XG5cbiAgc2V0IGRpc2FibGVkKGRpc2FibGVkOiBib29sZWFuKSB7XG4gICAgdGhpcy5fZGlzYWJsZWQgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoZGlzYWJsZWQpO1xuICB9XG5cbiAgLyoqIFdoZXRoZXIgUmVzaXplT2JzZXJ2ZXIgaXMgZGlzYWJsZWQgKi9cbiAgQElucHV0KClcbiAgZ2V0IHNlbnNvckRpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zZW5zb3JEaXNhYmxlZDtcbiAgfVxuXG4gIHNldCBzZW5zb3JEaXNhYmxlZChkaXNhYmxlZDogYm9vbGVhbikge1xuICAgIHRoaXMuX3NlbnNvckRpc2FibGVkID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGRpc2FibGVkKTtcbiAgfVxuXG4gIC8qKiBBIGZsYWcgdXNlZCB0byBlbmFibGUvZGlzYWJsZSB0aGUgc2Nyb2xsYmFyIHRodW1iIGRyYWdnZWQgZXZlbnQgKi9cbiAgQElucHV0KClcbiAgZ2V0IHBvaW50ZXJFdmVudHNEaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fcG9pbnRlckV2ZW50c0Rpc2FibGVkO1xuICB9XG5cbiAgc2V0IHBvaW50ZXJFdmVudHNEaXNhYmxlZChkaXNhYmxlZDogYm9vbGVhbikge1xuICAgIHRoaXMuX3BvaW50ZXJFdmVudHNEaXNhYmxlZCA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShkaXNhYmxlZCk7XG4gIH1cblxuICAvKiogRW5hYmxlIHZpZXdwb3J0IG1vdXNlbW92ZSBldmVudCBwcm9wYWdhdGlvbiAob25seSB3aGVuIHBvaW50ZXJFdmVudHNNZXRob2Q9XCJ2aWV3cG9ydFwiKSAqL1xuICBASW5wdXQoKVxuICBnZXQgdmlld3BvcnRQcm9wYWdhdGVNb3VzZU1vdmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3ZpZXdwb3J0UHJvcGFnYXRlTW91c2VNb3ZlO1xuICB9XG4gIHNldCB2aWV3cG9ydFByb3BhZ2F0ZU1vdXNlTW92ZShkaXNhYmxlZDogYm9vbGVhbikge1xuICAgIHRoaXMuX3ZpZXdwb3J0UHJvcGFnYXRlTW91c2VNb3ZlID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGRpc2FibGVkKTtcbiAgfVxuXG4gIC8qKiBBIGNsYXNzIGZvcndhcmRlZCB0byBzY3JvbGxhYmxlIHZpZXdwb3J0IGVsZW1lbnQgKi9cbiAgQElucHV0KCkgdmlld0NsYXNzOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy52aWV3Q2xhc3M7XG4gIC8qKiBBIGNsYXNzIGZvcndhcmRlZCB0byB0aGUgc2Nyb2xsYmFyIHRyYWNrIGVsZW1lbnQgKi9cbiAgQElucHV0KCkgdHJhY2tDbGFzczogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudHJhY2tDbGFzcztcbiAgLyoqIEEgY2xhc3MgZm9yd2FyZGVkIHRvIHRoZSBzY3JvbGxiYXIgdGh1bWIgZWxlbWVudCAqL1xuICBASW5wdXQoKSB0aHVtYkNsYXNzOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy50aHVtYkNsYXNzO1xuICAvKiogTWluaW11bSBzY3JvbGxiYXIgdGh1bWIgc2l6ZSAqL1xuICBASW5wdXQoKSBtaW5UaHVtYlNpemU6IG51bWJlciB8IHVuZGVmaW5lZCA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLm1pblRodW1iU2l6ZTtcbiAgLyoqIFRoZSBkdXJhdGlvbiB3aGljaCB0aGUgc2Nyb2xsaW5nIHRha2VzIHRvIHJlYWNoIGl0cyB0YXJnZXQgd2hlbiBzY3JvbGxiYXIgcmFpbCBpcyBjbGlja2VkICovXG4gIEBJbnB1dCgpIHRyYWNrQ2xpY2tTY3JvbGxEdXJhdGlvbjogbnVtYmVyIHwgdW5kZWZpbmVkID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudHJhY2tDbGlja1Njcm9sbER1cmF0aW9uO1xuICAvKipcbiAgICogU2V0cyB0aGUgcG9pbnRlciBldmVudHMgbWV0aG9kXG4gICAqIFVzZSB2aWV3cG9ydCBwb2ludGVyIGV2ZW50cyAgdG8gaGFuZGxlIGRyYWdnaW5nIGFuZCB0cmFjayBjbGljayAoVGhpcyBtYWtlcyBzY3JvbGxpbmcgd29yayB3aGVuIG1vdXNlIGlzIG92ZXIgdGhlIHNjcm9sbGJhcilcbiAgICogVXNlIHNjcm9sbGJhciBwb2ludGVyIGV2ZW50cyB0byBoYW5kbGUgZHJhZ2dpbmcgYW5kIHRyYWNrIGNsaWNrXG4gICAqL1xuICBASW5wdXQoKSBwb2ludGVyRXZlbnRzTWV0aG9kOiBTY3JvbGxiYXJQb2ludGVyRXZlbnRzTWV0aG9kID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMucG9pbnRlckV2ZW50c01ldGhvZDtcbiAgLyoqXG4gICAqIFNldHMgdGhlIHN1cHBvcnRlZCBzY3JvbGwgdHJhY2sgb2YgdGhlIHZpZXdwb3J0LCB0aGVyZSBhcmUgMyBvcHRpb25zOlxuICAgKlxuICAgKiAtIGB2ZXJ0aWNhbGAgVXNlIGJvdGggdmVydGljYWwgYW5kIGhvcml6b250YWwgc2Nyb2xsYmFyXG4gICAqIC0gYGhvcml6b250YWxgIFVzZSBib3RoIHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHNjcm9sbGJhclxuICAgKiAtIGBhbGxgIFVzZSBib3RoIHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHNjcm9sbGJhclxuICAgKi9cbiAgQElucHV0KCkgdHJhY2s6IFNjcm9sbGJhclRyYWNrID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudHJhY2s7XG4gIC8qKlxuICAgKiBXaGVuIHRvIHNob3cgdGhlIHNjcm9sbGJhciwgYW5kIHRoZXJlIGFyZSAzIG9wdGlvbnM6XG4gICAqXG4gICAqIC0gYG5hdGl2ZWAgKGRlZmF1bHQpIFNjcm9sbGJhciB3aWxsIGJlIHZpc2libGUgd2hlbiB2aWV3cG9ydCBpcyBzY3JvbGxhYmxlIGxpa2Ugd2l0aCBuYXRpdmUgc2Nyb2xsYmFyXG4gICAqIC0gYGhvdmVyYCBTY3JvbGxiYXJzIGFyZSBoaWRkZW4gYnkgZGVmYXVsdCwgb25seSB2aXNpYmxlIG9uIHNjcm9sbGluZyBvciBob3ZlcmluZ1xuICAgKiAtIGBhbHdheXNgIFNjcm9sbGJhcnMgYXJlIGFsd2F5cyBzaG93biBldmVuIGlmIHRoZSB2aWV3cG9ydCBpcyBub3Qgc2Nyb2xsYWJsZVxuICAgKi9cbiAgQElucHV0KCkgdmlzaWJpbGl0eTogU2Nyb2xsYmFyVmlzaWJpbGl0eSA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnZpc2liaWxpdHk7XG4gIC8qKlxuICAgKiAgU2V0cyB0aGUgYXBwZWFyYW5jZSBvZiB0aGUgc2Nyb2xsYmFyLCB0aGVyZSBhcmUgMiBvcHRpb25zOlxuICAgKlxuICAgKiAtIGBzdGFuZGFyZGAgKGRlZmF1bHQpIHNjcm9sbGJhciBzcGFjZSB3aWxsIGJlIHJlc2VydmVkIGp1c3QgbGlrZSB3aXRoIG5hdGl2ZSBzY3JvbGxiYXIuXG4gICAqIC0gYGNvbXBhY3RgIHNjcm9sbGJhciBkb2Vzbid0IHJlc2VydmUgYW55IHNwYWNlLCB0aGV5IGFyZSBwbGFjZWQgb3ZlciB0aGUgdmlld3BvcnQuXG4gICAqL1xuICBASW5wdXQoKSBhcHBlYXJhbmNlOiBTY3JvbGxiYXJBcHBlYXJhbmNlID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMuYXBwZWFyYW5jZTtcbiAgLyoqXG4gICAqIFNldHMgdGhlIHBvc2l0aW9uIG9mIGVhY2ggc2Nyb2xsYmFyLCB0aGVyZSBhcmUgNCBvcHRpb25zOlxuICAgKlxuICAgKiAtIGBuYXRpdmVgIChEZWZhdWx0KSBVc2UgdGhlIGRlZmF1bHQgcG9zaXRpb24gbGlrZSBpbiBuYXRpdmUgc2Nyb2xsYmFyLlxuICAgKiAtIGBpbnZlcnRZYCBJbnZlcnRzIHZlcnRpY2FsIHNjcm9sbGJhciBwb3NpdGlvblxuICAgKiAtIGBpbnZlcnRYYCBJbnZlcnRzIEhvcml6b250YWwgc2Nyb2xsYmFyIHBvc2l0aW9uXG4gICAqIC0gYGludmVydEFsbGAgSW52ZXJ0cyBib3RoIHNjcm9sbGJhciBwb3NpdGlvbnNcbiAgICovXG4gIEBJbnB1dCgpIHBvc2l0aW9uOiBTY3JvbGxiYXJQb3NpdGlvbiA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnBvc2l0aW9uO1xuICAvKiogRGVib3VuY2UgaW50ZXJ2YWwgZm9yIGRldGVjdGluZyBjaGFuZ2VzIHZpYSBSZXNpemVPYnNlcnZlciAqL1xuICBASW5wdXQoKSBzZW5zb3JEZWJvdW5jZTogbnVtYmVyIHwgdW5kZWZpbmVkID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMuc2Vuc29yRGVib3VuY2U7XG4gIC8qKiBTY3JvbGwgQXVkaXQgVGltZSAqL1xuICBASW5wdXQoKSBzY3JvbGxBdWRpdFRpbWU6IG51bWJlciB8IHVuZGVmaW5lZCA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnNjcm9sbEF1ZGl0VGltZTtcbiAgLyoqIFN0ZWFtIHRoYXQgZW1pdHMgd2hlbiBzY3JvbGxiYXIgaXMgdXBkYXRlZCAqL1xuICBAT3V0cHV0KCkgdXBkYXRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgLyoqIERlZmF1bHQgdmlld3BvcnQgcmVmZXJlbmNlICovXG4gIEBWaWV3Q2hpbGQoU2Nyb2xsVmlld3BvcnQsIHsgc3RhdGljOiB0cnVlIH0pIHByaXZhdGUgZGVmYXVsdFZpZXdQb3J0OiBTY3JvbGxWaWV3cG9ydDtcbiAgLyoqIEN1c3RvbSB2aWV3cG9ydCByZWZlcmVuY2UgKi9cbiAgQENvbnRlbnRDaGlsZChTY3JvbGxWaWV3cG9ydCwgeyBzdGF0aWM6IHRydWUgfSkgcHJpdmF0ZSBjdXN0b21WaWV3UG9ydDogU2Nyb2xsVmlld3BvcnQ7XG4gIC8qKiBWaWV3cG9ydCBFbGVtZW50ICovXG4gIHZpZXdwb3J0OiBTY3JvbGxWaWV3cG9ydDtcbiAgLyoqIFNldCBvZiBhdHRyaWJ1dGVzIGFkZGVkIG9uIHRoZSBzY3JvbGxiYXIgd3JhcHBlciAqL1xuICBzdGF0ZTogTmdTY3JvbGxiYXJTdGF0ZSA9IHt9O1xuICAvKiogU3RyZWFtIHRoYXQgZGVzdHJveXMgY29tcG9uZW50cycgb2JzZXJ2YWJsZXMgKi9cbiAgcHJpdmF0ZSByZWFkb25seSBkZXN0cm95ZWQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXG4gIC8qKiBTdHJlYW0gdGhhdCBlbWl0cyBvbiBzY3JvbGwgZXZlbnQgKi9cbiAgc2Nyb2xsZWQ6IE9ic2VydmFibGU8YW55PjtcbiAgLyoqIFN0ZWFtIHRoYXQgZW1pdHMgc2Nyb2xsIGV2ZW50IGZvciB2ZXJ0aWNhbCBzY3JvbGxiYXIgKi9cbiAgdmVydGljYWxTY3JvbGxlZDogT2JzZXJ2YWJsZTxhbnk+O1xuICAvKiogU3RlYW0gdGhhdCBlbWl0cyBzY3JvbGwgZXZlbnQgZm9yIGhvcml6b250YWwgc2Nyb2xsYmFyICovXG4gIGhvcml6b250YWxTY3JvbGxlZDogT2JzZXJ2YWJsZTxhbnk+O1xuXG4gIGdldCBuYXRpdmVFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5lbC5uYXRpdmVFbGVtZW50O1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBlbDogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIHpvbmU6IE5nWm9uZSxcbiAgICBwcml2YXRlIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBwcml2YXRlIGRpcjogRGlyZWN0aW9uYWxpdHksXG4gICAgcHJpdmF0ZSBzbW9vdGhTY3JvbGw6IFNtb290aFNjcm9sbE1hbmFnZXIsXG4gICAgcHVibGljIG1hbmFnZXI6IFNjcm9sbGJhck1hbmFnZXIpIHtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgbG9jYWwgc3RhdGUgd2l0aCBlYWNoIGNoYW5nZSBkZXRlY3Rpb25cbiAgICovXG4gIHByaXZhdGUgdXBkYXRlU3RhdGUoKSB7XG4gICAgbGV0IHZlcnRpY2FsVXNlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGxldCBob3Jpem9udGFsVXNlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGxldCBpc1ZlcnRpY2FsbHlTY3JvbGxhYmxlOiBib29sZWFuID0gZmFsc2U7XG4gICAgbGV0IGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLy8gQ2hlY2sgaWYgdmVydGljYWwgc2Nyb2xsYmFyIHNob3VsZCBiZSBkaXNwbGF5ZWRcbiAgICBpZiAodGhpcy50cmFjayA9PT0gJ2FsbCcgfHwgdGhpcy50cmFjayA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgaXNWZXJ0aWNhbGx5U2Nyb2xsYWJsZSA9IHRoaXMudmlld3BvcnQuc2Nyb2xsSGVpZ2h0ID4gdGhpcy52aWV3cG9ydC5jbGllbnRIZWlnaHQ7XG4gICAgICB2ZXJ0aWNhbFVzZWQgPSB0aGlzLnZpc2liaWxpdHkgPT09ICdhbHdheXMnIHx8IGlzVmVydGljYWxseVNjcm9sbGFibGU7XG4gICAgfVxuICAgIC8vIENoZWNrIGlmIGhvcml6b250YWwgc2Nyb2xsYmFyIHNob3VsZCBiZSBkaXNwbGF5ZWRcbiAgICBpZiAodGhpcy50cmFjayA9PT0gJ2FsbCcgfHwgdGhpcy50cmFjayA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICBpc0hvcml6b250YWxseVNjcm9sbGFibGUgPSB0aGlzLnZpZXdwb3J0LnNjcm9sbFdpZHRoID4gdGhpcy52aWV3cG9ydC5jbGllbnRXaWR0aDtcbiAgICAgIGhvcml6b250YWxVc2VkID0gdGhpcy52aXNpYmlsaXR5ID09PSAnYWx3YXlzJyB8fCBpc0hvcml6b250YWxseVNjcm9sbGFibGU7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGlubmVyIHdyYXBwZXIgYXR0cmlidXRlc1xuICAgIHRoaXMuX3VwZGF0ZVN0YXRlKHtcbiAgICAgIHBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uLFxuICAgICAgdHJhY2s6IHRoaXMudHJhY2ssXG4gICAgICBhcHBlYXJhbmNlOiB0aGlzLmFwcGVhcmFuY2UsXG4gICAgICB2aXNpYmlsaXR5OiB0aGlzLnZpc2liaWxpdHksXG4gICAgICBkZWFjdGl2YXRlZDogdGhpcy5kaXNhYmxlZCxcbiAgICAgIGRpcjogdGhpcy5kaXIudmFsdWUsXG4gICAgICBwb2ludGVyRXZlbnRzTWV0aG9kOiB0aGlzLnBvaW50ZXJFdmVudHNNZXRob2QsXG4gICAgICB2ZXJ0aWNhbFVzZWQsXG4gICAgICBob3Jpem9udGFsVXNlZCxcbiAgICAgIGlzVmVydGljYWxseVNjcm9sbGFibGUsXG4gICAgICBpc0hvcml6b250YWxseVNjcm9sbGFibGVcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZVN0YXRlKHN0YXRlOiBOZ1Njcm9sbGJhclN0YXRlKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHsgLi4udGhpcy5zdGF0ZSwgLi4uc3RhdGUgfTtcbiAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2Nyb2xsZWRCeURpcmVjdGlvbihwcm9wZXJ0eTogJ3Njcm9sbExlZnQnIHwgJ3Njcm9sbFRvcCcpIHtcbiAgICBsZXQgZXZlbnQ6IGFueTtcbiAgICByZXR1cm4gdGhpcy5zY3JvbGxlZC5waXBlKFxuICAgICAgdGFwKChlOiBhbnkpID0+IGV2ZW50ID0gZSksXG4gICAgICBwbHVjaygndGFyZ2V0JywgcHJvcGVydHkpLFxuICAgICAgcGFpcndpc2UoKSxcbiAgICAgIGZpbHRlcigoW3ByZXYsIGN1cnJdKSA9PiBwcmV2ICE9PSBjdXJyKSxcbiAgICAgIG1hcCgoKSA9PiBldmVudClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBob3ZlcmVkIHN0YXRlIGlmIGEgc2Nyb2xsYmFyIGlzIGJlaW5nIGhvdmVyZWRcbiAgICovXG4gIHNldEhvdmVyZWQoaG92ZXJlZDogU2Nyb2xsYmFySG92ZXJlZCkge1xuICAgIHRoaXMuem9uZS5ydW4oKCkgPT4gdGhpcy5fdXBkYXRlU3RhdGUoeyAuLi5ob3ZlcmVkIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgZHJhZ2dpbmcgc3RhdGUgaWYgYSBzY3JvbGxiYXIgaXMgYmVpbmcgZHJhZ2dlZFxuICAgKi9cbiAgc2V0RHJhZ2dpbmcoZHJhZ2dpbmc6IFNjcm9sbGJhckRyYWdnaW5nKSB7XG4gICAgdGhpcy56b25lLnJ1bigoKSA9PiB0aGlzLl91cGRhdGVTdGF0ZSh7IC4uLmRyYWdnaW5nIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgY2xpY2tlZCBzdGF0ZSBpZiBhIHNjcm9sbGJhciB0cmFjayBpcyBiZWluZyBjbGlja1xuICAgKi9cbiAgc2V0Q2xpY2tlZChzY3JvbGxiYXJDbGlja2VkOiBib29sZWFuKSB7XG4gICAgdGhpcy56b25lLnJ1bigoKSA9PiB0aGlzLl91cGRhdGVTdGF0ZSh7IHNjcm9sbGJhckNsaWNrZWQgfSkpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgLy8gU2V0IHRoZSB2aWV3cG9ydCBiYXNlZCBvbiB1c2VyIGNob2ljZVxuICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICBpZiAodGhpcy5jdXN0b21WaWV3UG9ydCkge1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdGhpcy5jdXN0b21WaWV3UG9ydDtcbiAgICAgICAgdGhpcy5kZWZhdWx0Vmlld1BvcnQuc2V0QXNXcmFwcGVyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdGhpcy5kZWZhdWx0Vmlld1BvcnQ7XG4gICAgICB9XG4gICAgICAvLyBBY3RpdmF0ZSB0aGUgc2VsZWN0ZWQgdmlld3BvcnRcbiAgICAgIHRoaXMudmlld3BvcnQuc2V0QXNWaWV3cG9ydCh0aGlzLnZpZXdDbGFzcyEpO1xuXG4gICAgICBsZXQgc2Nyb2xsU3RyZWFtID0gZnJvbUV2ZW50KHRoaXMudmlld3BvcnQubmF0aXZlRWxlbWVudCwgJ3Njcm9sbCcsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgIC8vIFRocm90dGxlIHNjcm9sbCBldmVudCBpZiAnc2Nyb2xsQXVkaXRUaW1lJyBpcyBzZXRcbiAgICAgIHNjcm9sbFN0cmVhbSA9IHRoaXMuc2Nyb2xsQXVkaXRUaW1lID8gc2Nyb2xsU3RyZWFtLnBpcGUoYXVkaXRUaW1lKHRoaXMuc2Nyb2xsQXVkaXRUaW1lKSkgOiBzY3JvbGxTdHJlYW07XG4gICAgICAvLyBJbml0aWFsaXplIHNjcm9sbCBzdHJlYW1zXG4gICAgICB0aGlzLnNjcm9sbGVkID0gbmV3IE9ic2VydmFibGUoKHN1YnNjcmliZXI6IFN1YnNjcmliZXI8YW55PikgPT5cbiAgICAgICAgc2Nyb2xsU3RyZWFtLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveWVkKSkuc3Vic2NyaWJlKHN1YnNjcmliZXIpXG4gICAgICApO1xuICAgICAgdGhpcy52ZXJ0aWNhbFNjcm9sbGVkID0gdGhpcy5nZXRTY3JvbGxlZEJ5RGlyZWN0aW9uKCdzY3JvbGxUb3AnKTtcbiAgICAgIHRoaXMuaG9yaXpvbnRhbFNjcm9sbGVkID0gdGhpcy5nZXRTY3JvbGxlZEJ5RGlyZWN0aW9uKCdzY3JvbGxMZWZ0Jyk7XG4gICAgfSk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XG4gICAgdGhpcy51cGRhdGVTdGF0ZSgpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5kZXN0cm95ZWQubmV4dCgpO1xuICAgIHRoaXMuZGVzdHJveWVkLmNvbXBsZXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGxvY2FsIHN0YXRlIGFuZCB0aGUgaW50ZXJuYWwgc2Nyb2xsYmFyIGNvbnRyb2xzXG4gICAqL1xuICB1cGRhdGUoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmhvcml6b250YWxVc2VkKSB7XG4gICAgICAvLyBBdXRvLWhlaWdodDogU2V0IGNvbXBvbmVudCBoZWlnaHQgdG8gY29udGVudCBoZWlnaHRcbiAgICAgIHRoaXMubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHsgdGhpcy52aWV3cG9ydC5jb250ZW50SGVpZ2h0IH1weGA7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlZC5uZXh0KCk7XG4gICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICAvKipcbiAgICogU21vb3RoIHNjcm9sbCBmdW5jdGlvbnNcbiAgICovXG4gIHNjcm9sbFRvKG9wdGlvbnM6IFNtb290aFNjcm9sbFRvT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnNtb290aFNjcm9sbC5zY3JvbGxUbyh0aGlzLnZpZXdwb3J0Lm5hdGl2ZUVsZW1lbnQsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbCB0byBlbGVtZW50IGJ5IHJlZmVyZW5jZSBvciBzZWxlY3RvclxuICAgKi9cbiAgc2Nyb2xsVG9FbGVtZW50KHRhcmdldDogU21vb3RoU2Nyb2xsRWxlbWVudCwgb3B0aW9ucz8pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5zbW9vdGhTY3JvbGwuc2Nyb2xsVG9FbGVtZW50KHRoaXMudmlld3BvcnQubmF0aXZlRWxlbWVudCwgdGFyZ2V0LCBvcHRpb25zKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgU2Nyb2xsYmFyRHJhZ2dpbmcge1xuICB2ZXJ0aWNhbERyYWdnaW5nPzogYm9vbGVhbjtcbiAgaG9yaXpvbnRhbERyYWdnaW5nPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFNjcm9sbGJhckhvdmVyZWQge1xuICB2ZXJ0aWNhbEhvdmVyZWQ/OiBib29sZWFuO1xuICBob3Jpem9udGFsSG92ZXJlZD86IGJvb2xlYW47XG59XG4iXX0=