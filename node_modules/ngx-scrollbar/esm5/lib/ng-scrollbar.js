import { __assign, __decorate, __metadata, __read } from "tslib";
import { Component, Input, Output, ViewChild, ContentChild, OnInit, AfterViewChecked, OnDestroy, NgZone, ElementRef, EventEmitter, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';
import { Directionality } from '@angular/cdk/bidi';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { fromEvent, Observable, Subject } from 'rxjs';
import { auditTime, filter, map, pairwise, pluck, takeUntil, tap } from 'rxjs/operators';
import { ScrollViewport } from './scroll-viewport';
import { SmoothScrollElement, SmoothScrollManager, SmoothScrollToOptions } from 'ngx-scrollbar/smooth-scroll';
import { ScrollbarManager } from './utils/scrollbar-manager';
var NgScrollbar = /** @class */ (function () {
    function NgScrollbar(el, zone, changeDetectorRef, dir, smoothScroll, manager) {
        this.el = el;
        this.zone = zone;
        this.changeDetectorRef = changeDetectorRef;
        this.dir = dir;
        this.smoothScroll = smoothScroll;
        this.manager = manager;
        this._disabled = false;
        this._sensorDisabled = this.manager.globalOptions.sensorDisabled;
        this._pointerEventsDisabled = this.manager.globalOptions.pointerEventsDisabled;
        this._viewportPropagateMouseMove = this.manager.globalOptions.viewportPropagateMouseMove;
        /** A class forwarded to scrollable viewport element */
        this.viewClass = this.manager.globalOptions.viewClass;
        /** A class forwarded to the scrollbar track element */
        this.trackClass = this.manager.globalOptions.trackClass;
        /** A class forwarded to the scrollbar thumb element */
        this.thumbClass = this.manager.globalOptions.thumbClass;
        /** Minimum scrollbar thumb size */
        this.minThumbSize = this.manager.globalOptions.minThumbSize;
        /** The duration which the scrolling takes to reach its target when scrollbar rail is clicked */
        this.trackClickScrollDuration = this.manager.globalOptions.trackClickScrollDuration;
        /**
         * Sets the pointer events method
         * Use viewport pointer events  to handle dragging and track click (This makes scrolling work when mouse is over the scrollbar)
         * Use scrollbar pointer events to handle dragging and track click
         */
        this.pointerEventsMethod = this.manager.globalOptions.pointerEventsMethod;
        /**
         * Sets the supported scroll track of the viewport, there are 3 options:
         *
         * - `vertical` Use both vertical and horizontal scrollbar
         * - `horizontal` Use both vertical and horizontal scrollbar
         * - `all` Use both vertical and horizontal scrollbar
         */
        this.track = this.manager.globalOptions.track;
        /**
         * When to show the scrollbar, and there are 3 options:
         *
         * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar
         * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering
         * - `always` Scrollbars are always shown even if the viewport is not scrollable
         */
        this.visibility = this.manager.globalOptions.visibility;
        /**
         *  Sets the appearance of the scrollbar, there are 2 options:
         *
         * - `standard` (default) scrollbar space will be reserved just like with native scrollbar.
         * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.
         */
        this.appearance = this.manager.globalOptions.appearance;
        /**
         * Sets the position of each scrollbar, there are 4 options:
         *
         * - `native` (Default) Use the default position like in native scrollbar.
         * - `invertY` Inverts vertical scrollbar position
         * - `invertX` Inverts Horizontal scrollbar position
         * - `invertAll` Inverts both scrollbar positions
         */
        this.position = this.manager.globalOptions.position;
        /** Debounce interval for detecting changes via ResizeObserver */
        this.sensorDebounce = this.manager.globalOptions.sensorDebounce;
        /** Scroll Audit Time */
        this.scrollAuditTime = this.manager.globalOptions.scrollAuditTime;
        /** Steam that emits when scrollbar is updated */
        this.updated = new EventEmitter();
        /** Set of attributes added on the scrollbar wrapper */
        this.state = {};
        /** Stream that destroys components' observables */
        this.destroyed = new Subject();
    }
    Object.defineProperty(NgScrollbar.prototype, "disabled", {
        /** Disable custom scrollbar and switch back to native scrollbar */
        get: function () {
            return this._disabled;
        },
        set: function (disabled) {
            this._disabled = coerceBooleanProperty(disabled);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgScrollbar.prototype, "sensorDisabled", {
        /** Whether ResizeObserver is disabled */
        get: function () {
            return this._sensorDisabled;
        },
        set: function (disabled) {
            this._sensorDisabled = coerceBooleanProperty(disabled);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgScrollbar.prototype, "pointerEventsDisabled", {
        /** A flag used to enable/disable the scrollbar thumb dragged event */
        get: function () {
            return this._pointerEventsDisabled;
        },
        set: function (disabled) {
            this._pointerEventsDisabled = coerceBooleanProperty(disabled);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgScrollbar.prototype, "viewportPropagateMouseMove", {
        /** Enable viewport mousemove event propagation (only when pointerEventsMethod="viewport") */
        get: function () {
            return this._viewportPropagateMouseMove;
        },
        set: function (disabled) {
            this._viewportPropagateMouseMove = coerceBooleanProperty(disabled);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgScrollbar.prototype, "nativeElement", {
        get: function () {
            return this.el.nativeElement;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Update local state with each change detection
     */
    NgScrollbar.prototype.updateState = function () {
        var verticalUsed = false;
        var horizontalUsed = false;
        var isVerticallyScrollable = false;
        var isHorizontallyScrollable = false;
        // Check if vertical scrollbar should be displayed
        if (this.track === 'all' || this.track === 'vertical') {
            isVerticallyScrollable = this.viewport.scrollHeight > this.viewport.clientHeight;
            verticalUsed = this.visibility === 'always' || isVerticallyScrollable;
        }
        // Check if horizontal scrollbar should be displayed
        if (this.track === 'all' || this.track === 'horizontal') {
            isHorizontallyScrollable = this.viewport.scrollWidth > this.viewport.clientWidth;
            horizontalUsed = this.visibility === 'always' || isHorizontallyScrollable;
        }
        // Update inner wrapper attributes
        this._updateState({
            position: this.position,
            track: this.track,
            appearance: this.appearance,
            visibility: this.visibility,
            deactivated: this.disabled,
            dir: this.dir.value,
            pointerEventsMethod: this.pointerEventsMethod,
            verticalUsed: verticalUsed,
            horizontalUsed: horizontalUsed,
            isVerticallyScrollable: isVerticallyScrollable,
            isHorizontallyScrollable: isHorizontallyScrollable
        });
    };
    NgScrollbar.prototype._updateState = function (state) {
        this.state = __assign(__assign({}, this.state), state);
        this.changeDetectorRef.detectChanges();
    };
    NgScrollbar.prototype.getScrolledByDirection = function (property) {
        var event;
        return this.scrolled.pipe(tap(function (e) { return event = e; }), pluck('target', property), pairwise(), filter(function (_a) {
            var _b = __read(_a, 2), prev = _b[0], curr = _b[1];
            return prev !== curr;
        }), map(function () { return event; }));
    };
    /**
     * Set hovered state if a scrollbar is being hovered
     */
    NgScrollbar.prototype.setHovered = function (hovered) {
        var _this = this;
        this.zone.run(function () { return _this._updateState(__assign({}, hovered)); });
    };
    /**
     * Set dragging state if a scrollbar is being dragged
     */
    NgScrollbar.prototype.setDragging = function (dragging) {
        var _this = this;
        this.zone.run(function () { return _this._updateState(__assign({}, dragging)); });
    };
    /**
     * Set clicked state if a scrollbar track is being click
     */
    NgScrollbar.prototype.setClicked = function (scrollbarClicked) {
        var _this = this;
        this.zone.run(function () { return _this._updateState({ scrollbarClicked: scrollbarClicked }); });
    };
    NgScrollbar.prototype.ngOnInit = function () {
        var _this = this;
        // Set the viewport based on user choice
        this.zone.runOutsideAngular(function () {
            if (_this.customViewPort) {
                _this.viewport = _this.customViewPort;
                _this.defaultViewPort.setAsWrapper();
            }
            else {
                _this.viewport = _this.defaultViewPort;
            }
            // Activate the selected viewport
            _this.viewport.setAsViewport(_this.viewClass);
            var scrollStream = fromEvent(_this.viewport.nativeElement, 'scroll', { passive: true });
            // Throttle scroll event if 'scrollAuditTime' is set
            scrollStream = _this.scrollAuditTime ? scrollStream.pipe(auditTime(_this.scrollAuditTime)) : scrollStream;
            // Initialize scroll streams
            _this.scrolled = new Observable(function (subscriber) {
                return scrollStream.pipe(takeUntil(_this.destroyed)).subscribe(subscriber);
            });
            _this.verticalScrolled = _this.getScrolledByDirection('scrollTop');
            _this.horizontalScrolled = _this.getScrolledByDirection('scrollLeft');
        });
    };
    NgScrollbar.prototype.ngAfterViewChecked = function () {
        this.updateState();
    };
    NgScrollbar.prototype.ngOnDestroy = function () {
        this.destroyed.next();
        this.destroyed.complete();
    };
    /**
     * Update local state and the internal scrollbar controls
     */
    NgScrollbar.prototype.update = function () {
        if (!this.state.horizontalUsed) {
            // Auto-height: Set component height to content height
            this.nativeElement.style.height = this.viewport.contentHeight + "px";
        }
        this.updated.next();
        this.changeDetectorRef.detectChanges();
    };
    /**
     * Smooth scroll functions
     */
    NgScrollbar.prototype.scrollTo = function (options) {
        return this.smoothScroll.scrollTo(this.viewport.nativeElement, options);
    };
    /**
     * Scroll to element by reference or selector
     */
    NgScrollbar.prototype.scrollToElement = function (target, options) {
        return this.smoothScroll.scrollToElement(this.viewport.nativeElement, target, options);
    };
    NgScrollbar.ctorParameters = function () { return [
        { type: ElementRef },
        { type: NgZone },
        { type: ChangeDetectorRef },
        { type: Directionality },
        { type: SmoothScrollManager },
        { type: ScrollbarManager }
    ]; };
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NgScrollbar.prototype, "disabled", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NgScrollbar.prototype, "sensorDisabled", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NgScrollbar.prototype, "pointerEventsDisabled", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NgScrollbar.prototype, "viewportPropagateMouseMove", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NgScrollbar.prototype, "viewClass", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NgScrollbar.prototype, "trackClass", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NgScrollbar.prototype, "thumbClass", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NgScrollbar.prototype, "minThumbSize", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NgScrollbar.prototype, "trackClickScrollDuration", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NgScrollbar.prototype, "pointerEventsMethod", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NgScrollbar.prototype, "track", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NgScrollbar.prototype, "visibility", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NgScrollbar.prototype, "appearance", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NgScrollbar.prototype, "position", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NgScrollbar.prototype, "sensorDebounce", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NgScrollbar.prototype, "scrollAuditTime", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NgScrollbar.prototype, "updated", void 0);
    __decorate([
        ViewChild(ScrollViewport, { static: true }),
        __metadata("design:type", ScrollViewport)
    ], NgScrollbar.prototype, "defaultViewPort", void 0);
    __decorate([
        ContentChild(ScrollViewport, { static: true }),
        __metadata("design:type", ScrollViewport)
    ], NgScrollbar.prototype, "customViewPort", void 0);
    NgScrollbar = __decorate([
        Component({
            selector: 'ng-scrollbar',
            exportAs: 'ngScrollbar',
            template: "<div class=\"ng-scrollbar-wrapper\" [ngAttr]=\"state\">\n  <div class=\"ng-scroll-viewport-wrapper\"\n       (resizeSensor)=\"update()\"\n       [sensorDebounce]=\"sensorDebounce\"\n       [sensorDisabled]=\"sensorDisabled\">\n    <div scrollViewport\n         hideNativeScrollbar>\n      <div>\n        <ng-content></ng-content>\n      </div>\n    </div>\n  </div>\n  <ng-container *ngIf=\"!disabled\">\n    <scrollbar-x *ngIf=\"state.horizontalUsed\"\n                 [attr.scrollable]=\"state.isHorizontallyScrollable\"\n                 [attr.fit]=\"state.verticalUsed\">\n    </scrollbar-x>\n    <scrollbar-y *ngIf=\"state.verticalUsed\"\n                 [attr.scrollable]=\"state.isVerticallyScrollable\"\n                 [attr.fit]=\"state.horizontalUsed\">\n    </scrollbar-y>\n  </ng-container>\n</div>\n\n",
            changeDetection: ChangeDetectionStrategy.OnPush,
            host: { '[class.ng-scrollbar]': 'true' },
            styles: ["::ng-deep .ng-scrollbar-measure{left:0;overflow:scroll;position:fixed;top:-9999px;scrollbar-width:none;-ms-overflow-style:none}::ng-deep .ng-scrollbar-measure::-webkit-scrollbar{display:none}:host{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0, 0, 0, 0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);--scrollbar-thumb-transition:height ease-out 150ms,width ease-out 150ms;--scrollbar-track-transition:height ease-out 150ms,width ease-out 150ms;display:block;position:relative;height:100%;max-height:100%;max-width:100%}:host>.ng-scrollbar-wrapper{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}:host>.ng-scrollbar-wrapper[verticalDragging=true],:host>.ng-scrollbar-wrapper[verticalHovered=true]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[horizontalDragging=true],:host>.ng-scrollbar-wrapper[horizontalHovered=true]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:0;bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:var(--scrollbar-total-size);bottom:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{scrollbar-width:none;-ms-overflow-style:none}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport::-webkit-scrollbar,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport::-webkit-scrollbar{display:none}:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{bottom:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{left:0;right:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{right:0;left:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]>.scrollbar-control{opacity:0;transition-property:opacity;transition-duration:.4s;transition-delay:.8s}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:active>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:focus>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:hover>.scrollbar-control{opacity:1;transition-duration:.4s;transition-delay:0s}:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper{overflow:hidden}.ng-scroll-viewport{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position}::ng-deep .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer,.ng-scroll-viewport-wrapper,.ng-scrollbar-wrapper,::ng-deep .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}", "::ng-deep .ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}::ng-deep .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}::ng-deep .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}"]
        }),
        __metadata("design:paramtypes", [ElementRef,
            NgZone,
            ChangeDetectorRef,
            Directionality,
            SmoothScrollManager,
            ScrollbarManager])
    ], NgScrollbar);
    return NgScrollbar;
}());
export { NgScrollbar };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctc2Nyb2xsYmFyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXNjcm9sbGJhci8iLCJzb3VyY2VzIjpbImxpYi9uZy1zY3JvbGxiYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUNMLE1BQU0sRUFDTixTQUFTLEVBQ1QsWUFBWSxFQUNaLE1BQU0sRUFDTixnQkFBZ0IsRUFDaEIsU0FBUyxFQUNULE1BQU0sRUFDTixVQUFVLEVBQ1YsWUFBWSxFQUNaLGlCQUFpQixFQUNqQix1QkFBdUIsRUFDeEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzlELE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFjLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNsRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxtQkFBbUIsRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBVzlHLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBVTdEO0lBMEhFLHFCQUNVLEVBQWMsRUFDZCxJQUFZLEVBQ1osaUJBQW9DLEVBQ3BDLEdBQW1CLEVBQ25CLFlBQWlDLEVBQ2xDLE9BQXlCO1FBTHhCLE9BQUUsR0FBRixFQUFFLENBQVk7UUFDZCxTQUFJLEdBQUosSUFBSSxDQUFRO1FBQ1osc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFtQjtRQUNwQyxRQUFHLEdBQUgsR0FBRyxDQUFnQjtR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LFlBQVksQ0FBQyxjQUFjLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUM7a0NBQXlCLGNBQWM7dURBQUM7SUF2RzVFLFdBQVc7UUFSdkIsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGNBQWM7WUFDeEIsUUFBUSxFQUFFLGFBQWE7WUFDdkIsOHpCQUFnQztZQUVoQyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtZQUMvQyxJQUFJLEVBQUUsRUFBRSxzQkFBc0IsRUFBRSxNQUFNLEVBQUU7O1NBQ3pDLENBQUM7eUNBNEhjLFVBQVU7WUFDUixNQUFNO1lBQ08saUJBQWlCO1lBQy9CLGNBQWM7WUFDTCxtQkFBbUI7WUFDekIsZ0JBQWdCO09BaEl2QixXQUFXLENBc1F2QjtJQUFELGtCQUFDO0NBQUEsQUF0UUQsSUFzUUM7U0F0UVksV0FBVyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgSW5wdXQsXG4gIE91dHB1dCxcbiAgVmlld0NoaWxkLFxuICBDb250ZW50Q2hpbGQsXG4gIE9uSW5pdCxcbiAgQWZ0ZXJWaWV3Q2hlY2tlZCxcbiAgT25EZXN0cm95LFxuICBOZ1pvbmUsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5XG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRGlyZWN0aW9uYWxpdHkgfSBmcm9tICdAYW5ndWxhci9jZGsvYmlkaSc7XG5pbXBvcnQgeyBjb2VyY2VCb29sZWFuUHJvcGVydHkgfSBmcm9tICdAYW5ndWxhci9jZGsvY29lcmNpb24nO1xuaW1wb3J0IHsgZnJvbUV2ZW50LCBPYnNlcnZhYmxlLCBTdWJzY3JpYmVyLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBhdWRpdFRpbWUsIGZpbHRlciwgbWFwLCBwYWlyd2lzZSwgcGx1Y2ssIHRha2VVbnRpbCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgU2Nyb2xsVmlld3BvcnQgfSBmcm9tICcuL3Njcm9sbC12aWV3cG9ydCc7XG5pbXBvcnQgeyBTbW9vdGhTY3JvbGxFbGVtZW50LCBTbW9vdGhTY3JvbGxNYW5hZ2VyLCBTbW9vdGhTY3JvbGxUb09wdGlvbnMgfSBmcm9tICduZ3gtc2Nyb2xsYmFyL3Ntb290aC1zY3JvbGwnO1xuLy8gVW5jb21tZW50IHRoZSBmb2xsb3dpbmcgbGluZSBpbiBkZXZlbG9wbWVudCBtb2RlXG4vL2ltcG9ydCB7IFNtb290aFNjcm9sbEVsZW1lbnQsIFNtb290aFNjcm9sbE1hbmFnZXIsIFNtb290aFNjcm9sbFRvT3B0aW9ucyB9IGZyb20gJy4uLy4uL3Ntb290aC1zY3JvbGwvc3JjL3B1YmxpY19hcGknO1xuaW1wb3J0IHtcbiAgU2Nyb2xsYmFyQXBwZWFyYW5jZSxcbiAgU2Nyb2xsYmFyVHJhY2ssXG4gIFNjcm9sbGJhclBvc2l0aW9uLFxuICBTY3JvbGxiYXJWaXNpYmlsaXR5LFxuICBOZ1Njcm9sbGJhclN0YXRlLFxuICBTY3JvbGxiYXJQb2ludGVyRXZlbnRzTWV0aG9kXG59IGZyb20gJy4vbmctc2Nyb2xsYmFyLm1vZGVsJztcbmltcG9ydCB7IFNjcm9sbGJhck1hbmFnZXIgfSBmcm9tICcuL3V0aWxzL3Njcm9sbGJhci1tYW5hZ2VyJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbmctc2Nyb2xsYmFyJyxcbiAgZXhwb3J0QXM6ICduZ1Njcm9sbGJhcicsXG4gIHRlbXBsYXRlVXJsOiAnbmctc2Nyb2xsYmFyLmh0bWwnLFxuICBzdHlsZVVybHM6IFsnbmctc2Nyb2xsYmFyLnNjc3MnLCAnc2Nyb2xsYmFyL3NoYXJlZC5zY3NzJ10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBob3N0OiB7ICdbY2xhc3Mubmctc2Nyb2xsYmFyXSc6ICd0cnVlJyB9XG59KVxuZXhwb3J0IGNsYXNzIE5nU2Nyb2xsYmFyIGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdDaGVja2VkLCBPbkRlc3Ryb3kge1xuXG4gIHByaXZhdGUgX2Rpc2FibGVkOiBib29sZWFuIHwgdW5kZWZpbmVkID0gZmFsc2U7XG4gIHByaXZhdGUgX3NlbnNvckRpc2FibGVkOiBib29sZWFuIHwgdW5kZWZpbmVkID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMuc2Vuc29yRGlzYWJsZWQ7XG4gIHByaXZhdGUgX3BvaW50ZXJFdmVudHNEaXNhYmxlZDogYm9vbGVhbiB8IHVuZGVmaW5lZCA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnBvaW50ZXJFdmVudHNEaXNhYmxlZDtcbiAgcHJpdmF0ZSBfdmlld3BvcnRQcm9wYWdhdGVNb3VzZU1vdmU6IGJvb2xlYW4gfCB1bmRlZmluZWQgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy52aWV3cG9ydFByb3BhZ2F0ZU1vdXNlTW92ZTtcblxuICAvKiogRGlzYWJsZSBjdXN0b20gc2Nyb2xsYmFyIGFuZCBzd2l0Y2ggYmFjayB0byBuYXRpdmUgc2Nyb2xsYmFyICovXG4gIEBJbnB1dCgpXG4gIGdldCBkaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gIH1cblxuICBzZXQgZGlzYWJsZWQoZGlzYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9kaXNhYmxlZCA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShkaXNhYmxlZCk7XG4gIH1cblxuICAvKiogV2hldGhlciBSZXNpemVPYnNlcnZlciBpcyBkaXNhYmxlZCAqL1xuICBASW5wdXQoKVxuICBnZXQgc2Vuc29yRGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbnNvckRpc2FibGVkO1xuICB9XG5cbiAgc2V0IHNlbnNvckRpc2FibGVkKGRpc2FibGVkOiBib29sZWFuKSB7XG4gICAgdGhpcy5fc2Vuc29yRGlzYWJsZWQgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoZGlzYWJsZWQpO1xuICB9XG5cbiAgLyoqIEEgZmxhZyB1c2VkIHRvIGVuYWJsZS9kaXNhYmxlIHRoZSBzY3JvbGxiYXIgdGh1bWIgZHJhZ2dlZCBldmVudCAqL1xuICBASW5wdXQoKVxuICBnZXQgcG9pbnRlckV2ZW50c0Rpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9wb2ludGVyRXZlbnRzRGlzYWJsZWQ7XG4gIH1cblxuICBzZXQgcG9pbnRlckV2ZW50c0Rpc2FibGVkKGRpc2FibGVkOiBib29sZWFuKSB7XG4gICAgdGhpcy5fcG9pbnRlckV2ZW50c0Rpc2FibGVkID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGRpc2FibGVkKTtcbiAgfVxuXG4gIC8qKiBFbmFibGUgdmlld3BvcnQgbW91c2Vtb3ZlIGV2ZW50IHByb3BhZ2F0aW9uIChvbmx5IHdoZW4gcG9pbnRlckV2ZW50c01ldGhvZD1cInZpZXdwb3J0XCIpICovXG4gIEBJbnB1dCgpXG4gIGdldCB2aWV3cG9ydFByb3BhZ2F0ZU1vdXNlTW92ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fdmlld3BvcnRQcm9wYWdhdGVNb3VzZU1vdmU7XG4gIH1cbiAgc2V0IHZpZXdwb3J0UHJvcGFnYXRlTW91c2VNb3ZlKGRpc2FibGVkOiBib29sZWFuKSB7XG4gICAgdGhpcy5fdmlld3BvcnRQcm9wYWdhdGVNb3VzZU1vdmUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoZGlzYWJsZWQpO1xuICB9XG5cbiAgLyoqIEEgY2xhc3MgZm9yd2FyZGVkIHRvIHNjcm9sbGFibGUgdmlld3BvcnQgZWxlbWVudCAqL1xuICBASW5wdXQoKSB2aWV3Q2xhc3M6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnZpZXdDbGFzcztcbiAgLyoqIEEgY2xhc3MgZm9yd2FyZGVkIHRvIHRoZSBzY3JvbGxiYXIgdHJhY2sgZWxlbWVudCAqL1xuICBASW5wdXQoKSB0cmFja0NsYXNzOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy50cmFja0NsYXNzO1xuICAvKiogQSBjbGFzcyBmb3J3YXJkZWQgdG8gdGhlIHNjcm9sbGJhciB0aHVtYiBlbGVtZW50ICovXG4gIEBJbnB1dCgpIHRodW1iQ2xhc3M6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnRodW1iQ2xhc3M7XG4gIC8qKiBNaW5pbXVtIHNjcm9sbGJhciB0aHVtYiBzaXplICovXG4gIEBJbnB1dCgpIG1pblRodW1iU2l6ZTogbnVtYmVyIHwgdW5kZWZpbmVkID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMubWluVGh1bWJTaXplO1xuICAvKiogVGhlIGR1cmF0aW9uIHdoaWNoIHRoZSBzY3JvbGxpbmcgdGFrZXMgdG8gcmVhY2ggaXRzIHRhcmdldCB3aGVuIHNjcm9sbGJhciByYWlsIGlzIGNsaWNrZWQgKi9cbiAgQElucHV0KCkgdHJhY2tDbGlja1Njcm9sbER1cmF0aW9uOiBudW1iZXIgfCB1bmRlZmluZWQgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy50cmFja0NsaWNrU2Nyb2xsRHVyYXRpb247XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBwb2ludGVyIGV2ZW50cyBtZXRob2RcbiAgICogVXNlIHZpZXdwb3J0IHBvaW50ZXIgZXZlbnRzICB0byBoYW5kbGUgZHJhZ2dpbmcgYW5kIHRyYWNrIGNsaWNrIChUaGlzIG1ha2VzIHNjcm9sbGluZyB3b3JrIHdoZW4gbW91c2UgaXMgb3ZlciB0aGUgc2Nyb2xsYmFyKVxuICAgKiBVc2Ugc2Nyb2xsYmFyIHBvaW50ZXIgZXZlbnRzIHRvIGhhbmRsZSBkcmFnZ2luZyBhbmQgdHJhY2sgY2xpY2tcbiAgICovXG4gIEBJbnB1dCgpIHBvaW50ZXJFdmVudHNNZXRob2Q6IFNjcm9sbGJhclBvaW50ZXJFdmVudHNNZXRob2QgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5wb2ludGVyRXZlbnRzTWV0aG9kO1xuICAvKipcbiAgICogU2V0cyB0aGUgc3VwcG9ydGVkIHNjcm9sbCB0cmFjayBvZiB0aGUgdmlld3BvcnQsIHRoZXJlIGFyZSAzIG9wdGlvbnM6XG4gICAqXG4gICAqIC0gYHZlcnRpY2FsYCBVc2UgYm90aCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY3JvbGxiYXJcbiAgICogLSBgaG9yaXpvbnRhbGAgVXNlIGJvdGggdmVydGljYWwgYW5kIGhvcml6b250YWwgc2Nyb2xsYmFyXG4gICAqIC0gYGFsbGAgVXNlIGJvdGggdmVydGljYWwgYW5kIGhvcml6b250YWwgc2Nyb2xsYmFyXG4gICAqL1xuICBASW5wdXQoKSB0cmFjazogU2Nyb2xsYmFyVHJhY2sgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy50cmFjaztcbiAgLyoqXG4gICAqIFdoZW4gdG8gc2hvdyB0aGUgc2Nyb2xsYmFyLCBhbmQgdGhlcmUgYXJlIDMgb3B0aW9uczpcbiAgICpcbiAgICogLSBgbmF0aXZlYCAoZGVmYXVsdCkgU2Nyb2xsYmFyIHdpbGwgYmUgdmlzaWJsZSB3aGVuIHZpZXdwb3J0IGlzIHNjcm9sbGFibGUgbGlrZSB3aXRoIG5hdGl2ZSBzY3JvbGxiYXJcbiAgICogLSBgaG92ZXJgIFNjcm9sbGJhcnMgYXJlIGhpZGRlbiBieSBkZWZhdWx0LCBvbmx5IHZpc2libGUgb24gc2Nyb2xsaW5nIG9yIGhvdmVyaW5nXG4gICAqIC0gYGFsd2F5c2AgU2Nyb2xsYmFycyBhcmUgYWx3YXlzIHNob3duIGV2ZW4gaWYgdGhlIHZpZXdwb3J0IGlzIG5vdCBzY3JvbGxhYmxlXG4gICAqL1xuICBASW5wdXQoKSB2aXNpYmlsaXR5OiBTY3JvbGxiYXJWaXNpYmlsaXR5ID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudmlzaWJpbGl0eTtcbiAgLyoqXG4gICAqICBTZXRzIHRoZSBhcHBlYXJhbmNlIG9mIHRoZSBzY3JvbGxiYXIsIHRoZXJlIGFyZSAyIG9wdGlvbnM6XG4gICAqXG4gICAqIC0gYHN0YW5kYXJkYCAoZGVmYXVsdCkgc2Nyb2xsYmFyIHNwYWNlIHdpbGwgYmUgcmVzZXJ2ZWQganVzdCBsaWtlIHdpdGggbmF0aXZlIHNjcm9sbGJhci5cbiAgICogLSBgY29tcGFjdGAgc2Nyb2xsYmFyIGRvZXNuJ3QgcmVzZXJ2ZSBhbnkgc3BhY2UsIHRoZXkgYXJlIHBsYWNlZCBvdmVyIHRoZSB2aWV3cG9ydC5cbiAgICovXG4gIEBJbnB1dCgpIGFwcGVhcmFuY2U6IFNjcm9sbGJhckFwcGVhcmFuY2UgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5hcHBlYXJhbmNlO1xuICAvKipcbiAgICogU2V0cyB0aGUgcG9zaXRpb24gb2YgZWFjaCBzY3JvbGxiYXIsIHRoZXJlIGFyZSA0IG9wdGlvbnM6XG4gICAqXG4gICAqIC0gYG5hdGl2ZWAgKERlZmF1bHQpIFVzZSB0aGUgZGVmYXVsdCBwb3NpdGlvbiBsaWtlIGluIG5hdGl2ZSBzY3JvbGxiYXIuXG4gICAqIC0gYGludmVydFlgIEludmVydHMgdmVydGljYWwgc2Nyb2xsYmFyIHBvc2l0aW9uXG4gICAqIC0gYGludmVydFhgIEludmVydHMgSG9yaXpvbnRhbCBzY3JvbGxiYXIgcG9zaXRpb25cbiAgICogLSBgaW52ZXJ0QWxsYCBJbnZlcnRzIGJvdGggc2Nyb2xsYmFyIHBvc2l0aW9uc1xuICAgKi9cbiAgQElucHV0KCkgcG9zaXRpb246IFNjcm9sbGJhclBvc2l0aW9uID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMucG9zaXRpb247XG4gIC8qKiBEZWJvdW5jZSBpbnRlcnZhbCBmb3IgZGV0ZWN0aW5nIGNoYW5nZXMgdmlhIFJlc2l6ZU9ic2VydmVyICovXG4gIEBJbnB1dCgpIHNlbnNvckRlYm91bmNlOiBudW1iZXIgfCB1bmRlZmluZWQgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5zZW5zb3JEZWJvdW5jZTtcbiAgLyoqIFNjcm9sbCBBdWRpdCBUaW1lICovXG4gIEBJbnB1dCgpIHNjcm9sbEF1ZGl0VGltZTogbnVtYmVyIHwgdW5kZWZpbmVkID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMuc2Nyb2xsQXVkaXRUaW1lO1xuICAvKiogU3RlYW0gdGhhdCBlbWl0cyB3aGVuIHNjcm9sbGJhciBpcyB1cGRhdGVkICovXG4gIEBPdXRwdXQoKSB1cGRhdGVkID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICAvKiogRGVmYXVsdCB2aWV3cG9ydCByZWZlcmVuY2UgKi9cbiAgQFZpZXdDaGlsZChTY3JvbGxWaWV3cG9ydCwgeyBzdGF0aWM6IHRydWUgfSkgcHJpdmF0ZSBkZWZhdWx0Vmlld1BvcnQ6IFNjcm9sbFZpZXdwb3J0O1xuICAvKiogQ3VzdG9tIHZpZXdwb3J0IHJlZmVyZW5jZSAqL1xuICBAQ29udGVudENoaWxkKFNjcm9sbFZpZXdwb3J0LCB7IHN0YXRpYzogdHJ1ZSB9KSBwcml2YXRlIGN1c3RvbVZpZXdQb3J0OiBTY3JvbGxWaWV3cG9ydDtcbiAgLyoqIFZpZXdwb3J0IEVsZW1lbnQgKi9cbiAgdmlld3BvcnQ6IFNjcm9sbFZpZXdwb3J0O1xuICAvKiogU2V0IG9mIGF0dHJpYnV0ZXMgYWRkZWQgb24gdGhlIHNjcm9sbGJhciB3cmFwcGVyICovXG4gIHN0YXRlOiBOZ1Njcm9sbGJhclN0YXRlID0ge307XG4gIC8qKiBTdHJlYW0gdGhhdCBkZXN0cm95cyBjb21wb25lbnRzJyBvYnNlcnZhYmxlcyAqL1xuICBwcml2YXRlIHJlYWRvbmx5IGRlc3Ryb3llZCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG5cbiAgLyoqIFN0cmVhbSB0aGF0IGVtaXRzIG9uIHNjcm9sbCBldmVudCAqL1xuICBzY3JvbGxlZDogT2JzZXJ2YWJsZTxhbnk+O1xuICAvKiogU3RlYW0gdGhhdCBlbWl0cyBzY3JvbGwgZXZlbnQgZm9yIHZlcnRpY2FsIHNjcm9sbGJhciAqL1xuICB2ZXJ0aWNhbFNjcm9sbGVkOiBPYnNlcnZhYmxlPGFueT47XG4gIC8qKiBTdGVhbSB0aGF0IGVtaXRzIHNjcm9sbCBldmVudCBmb3IgaG9yaXpvbnRhbCBzY3JvbGxiYXIgKi9cbiAgaG9yaXpvbnRhbFNjcm9sbGVkOiBPYnNlcnZhYmxlPGFueT47XG5cbiAgZ2V0IG5hdGl2ZUVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQ7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGVsOiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgem9uZTogTmdab25lLFxuICAgIHByaXZhdGUgY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIHByaXZhdGUgZGlyOiBEaXJlY3Rpb25hbGl0eSxcbiAgICBwcml2YXRlIHNtb290aFNjcm9sbDogU21vb3RoU2Nyb2xsTWFuYWdlcixcbiAgICBwdWJsaWMgbWFuYWdlcjogU2Nyb2xsYmFyTWFuYWdlcikge1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBsb2NhbCBzdGF0ZSB3aXRoIGVhY2ggY2hhbmdlIGRldGVjdGlvblxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVTdGF0ZSgpIHtcbiAgICBsZXQgdmVydGljYWxVc2VkOiBib29sZWFuID0gZmFsc2U7XG4gICAgbGV0IGhvcml6b250YWxVc2VkOiBib29sZWFuID0gZmFsc2U7XG4gICAgbGV0IGlzVmVydGljYWxseVNjcm9sbGFibGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBsZXQgaXNIb3Jpem9udGFsbHlTY3JvbGxhYmxlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvLyBDaGVjayBpZiB2ZXJ0aWNhbCBzY3JvbGxiYXIgc2hvdWxkIGJlIGRpc3BsYXllZFxuICAgIGlmICh0aGlzLnRyYWNrID09PSAnYWxsJyB8fCB0aGlzLnRyYWNrID09PSAndmVydGljYWwnKSB7XG4gICAgICBpc1ZlcnRpY2FsbHlTY3JvbGxhYmxlID0gdGhpcy52aWV3cG9ydC5zY3JvbGxIZWlnaHQgPiB0aGlzLnZpZXdwb3J0LmNsaWVudEhlaWdodDtcbiAgICAgIHZlcnRpY2FsVXNlZCA9IHRoaXMudmlzaWJpbGl0eSA9PT0gJ2Fsd2F5cycgfHwgaXNWZXJ0aWNhbGx5U2Nyb2xsYWJsZTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgaWYgaG9yaXpvbnRhbCBzY3JvbGxiYXIgc2hvdWxkIGJlIGRpc3BsYXllZFxuICAgIGlmICh0aGlzLnRyYWNrID09PSAnYWxsJyB8fCB0aGlzLnRyYWNrID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgIGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZSA9IHRoaXMudmlld3BvcnQuc2Nyb2xsV2lkdGggPiB0aGlzLnZpZXdwb3J0LmNsaWVudFdpZHRoO1xuICAgICAgaG9yaXpvbnRhbFVzZWQgPSB0aGlzLnZpc2liaWxpdHkgPT09ICdhbHdheXMnIHx8IGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgaW5uZXIgd3JhcHBlciBhdHRyaWJ1dGVzXG4gICAgdGhpcy5fdXBkYXRlU3RhdGUoe1xuICAgICAgcG9zaXRpb246IHRoaXMucG9zaXRpb24sXG4gICAgICB0cmFjazogdGhpcy50cmFjayxcbiAgICAgIGFwcGVhcmFuY2U6IHRoaXMuYXBwZWFyYW5jZSxcbiAgICAgIHZpc2liaWxpdHk6IHRoaXMudmlzaWJpbGl0eSxcbiAgICAgIGRlYWN0aXZhdGVkOiB0aGlzLmRpc2FibGVkLFxuICAgICAgZGlyOiB0aGlzLmRpci52YWx1ZSxcbiAgICAgIHBvaW50ZXJFdmVudHNNZXRob2Q6IHRoaXMucG9pbnRlckV2ZW50c01ldGhvZCxcbiAgICAgIHZlcnRpY2FsVXNlZCxcbiAgICAgIGhvcml6b250YWxVc2VkLFxuICAgICAgaXNWZXJ0aWNhbGx5U2Nyb2xsYWJsZSxcbiAgICAgIGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlU3RhdGUoc3RhdGU6IE5nU2Nyb2xsYmFyU3RhdGUpIHtcbiAgICB0aGlzLnN0YXRlID0geyAuLi50aGlzLnN0YXRlLCAuLi5zdGF0ZSB9O1xuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTY3JvbGxlZEJ5RGlyZWN0aW9uKHByb3BlcnR5OiAnc2Nyb2xsTGVmdCcgfCAnc2Nyb2xsVG9wJykge1xuICAgIGxldCBldmVudDogYW55O1xuICAgIHJldHVybiB0aGlzLnNjcm9sbGVkLnBpcGUoXG4gICAgICB0YXAoKGU6IGFueSkgPT4gZXZlbnQgPSBlKSxcbiAgICAgIHBsdWNrKCd0YXJnZXQnLCBwcm9wZXJ0eSksXG4gICAgICBwYWlyd2lzZSgpLFxuICAgICAgZmlsdGVyKChbcHJldiwgY3Vycl0pID0+IHByZXYgIT09IGN1cnIpLFxuICAgICAgbWFwKCgpID0+IGV2ZW50KVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGhvdmVyZWQgc3RhdGUgaWYgYSBzY3JvbGxiYXIgaXMgYmVpbmcgaG92ZXJlZFxuICAgKi9cbiAgc2V0SG92ZXJlZChob3ZlcmVkOiBTY3JvbGxiYXJIb3ZlcmVkKSB7XG4gICAgdGhpcy56b25lLnJ1bigoKSA9PiB0aGlzLl91cGRhdGVTdGF0ZSh7IC4uLmhvdmVyZWQgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBkcmFnZ2luZyBzdGF0ZSBpZiBhIHNjcm9sbGJhciBpcyBiZWluZyBkcmFnZ2VkXG4gICAqL1xuICBzZXREcmFnZ2luZyhkcmFnZ2luZzogU2Nyb2xsYmFyRHJhZ2dpbmcpIHtcbiAgICB0aGlzLnpvbmUucnVuKCgpID0+IHRoaXMuX3VwZGF0ZVN0YXRlKHsgLi4uZHJhZ2dpbmcgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjbGlja2VkIHN0YXRlIGlmIGEgc2Nyb2xsYmFyIHRyYWNrIGlzIGJlaW5nIGNsaWNrXG4gICAqL1xuICBzZXRDbGlja2VkKHNjcm9sbGJhckNsaWNrZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnpvbmUucnVuKCgpID0+IHRoaXMuX3VwZGF0ZVN0YXRlKHsgc2Nyb2xsYmFyQ2xpY2tlZCB9KSk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICAvLyBTZXQgdGhlIHZpZXdwb3J0IGJhc2VkIG9uIHVzZXIgY2hvaWNlXG4gICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmN1c3RvbVZpZXdQb3J0KSB7XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLmN1c3RvbVZpZXdQb3J0O1xuICAgICAgICB0aGlzLmRlZmF1bHRWaWV3UG9ydC5zZXRBc1dyYXBwZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLmRlZmF1bHRWaWV3UG9ydDtcbiAgICAgIH1cbiAgICAgIC8vIEFjdGl2YXRlIHRoZSBzZWxlY3RlZCB2aWV3cG9ydFxuICAgICAgdGhpcy52aWV3cG9ydC5zZXRBc1ZpZXdwb3J0KHRoaXMudmlld0NsYXNzISk7XG5cbiAgICAgIGxldCBzY3JvbGxTdHJlYW0gPSBmcm9tRXZlbnQodGhpcy52aWV3cG9ydC5uYXRpdmVFbGVtZW50LCAnc2Nyb2xsJywgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgLy8gVGhyb3R0bGUgc2Nyb2xsIGV2ZW50IGlmICdzY3JvbGxBdWRpdFRpbWUnIGlzIHNldFxuICAgICAgc2Nyb2xsU3RyZWFtID0gdGhpcy5zY3JvbGxBdWRpdFRpbWUgPyBzY3JvbGxTdHJlYW0ucGlwZShhdWRpdFRpbWUodGhpcy5zY3JvbGxBdWRpdFRpbWUpKSA6IHNjcm9sbFN0cmVhbTtcbiAgICAgIC8vIEluaXRpYWxpemUgc2Nyb2xsIHN0cmVhbXNcbiAgICAgIHRoaXMuc2Nyb2xsZWQgPSBuZXcgT2JzZXJ2YWJsZSgoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxhbnk+KSA9PlxuICAgICAgICBzY3JvbGxTdHJlYW0ucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95ZWQpKS5zdWJzY3JpYmUoc3Vic2NyaWJlcilcbiAgICAgICk7XG4gICAgICB0aGlzLnZlcnRpY2FsU2Nyb2xsZWQgPSB0aGlzLmdldFNjcm9sbGVkQnlEaXJlY3Rpb24oJ3Njcm9sbFRvcCcpO1xuICAgICAgdGhpcy5ob3Jpem9udGFsU2Nyb2xsZWQgPSB0aGlzLmdldFNjcm9sbGVkQnlEaXJlY3Rpb24oJ3Njcm9sbExlZnQnKTtcbiAgICB9KTtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXRlKCk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLmRlc3Ryb3llZC5uZXh0KCk7XG4gICAgdGhpcy5kZXN0cm95ZWQuY29tcGxldGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgbG9jYWwgc3RhdGUgYW5kIHRoZSBpbnRlcm5hbCBzY3JvbGxiYXIgY29udHJvbHNcbiAgICovXG4gIHVwZGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuaG9yaXpvbnRhbFVzZWQpIHtcbiAgICAgIC8vIEF1dG8taGVpZ2h0OiBTZXQgY29tcG9uZW50IGhlaWdodCB0byBjb250ZW50IGhlaWdodFxuICAgICAgdGhpcy5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9IGAkeyB0aGlzLnZpZXdwb3J0LmNvbnRlbnRIZWlnaHQgfXB4YDtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVkLm5leHQoKTtcbiAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTbW9vdGggc2Nyb2xsIGZ1bmN0aW9uc1xuICAgKi9cbiAgc2Nyb2xsVG8ob3B0aW9uczogU21vb3RoU2Nyb2xsVG9PcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuc21vb3RoU2Nyb2xsLnNjcm9sbFRvKHRoaXMudmlld3BvcnQubmF0aXZlRWxlbWVudCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRvIGVsZW1lbnQgYnkgcmVmZXJlbmNlIG9yIHNlbGVjdG9yXG4gICAqL1xuICBzY3JvbGxUb0VsZW1lbnQodGFyZ2V0OiBTbW9vdGhTY3JvbGxFbGVtZW50LCBvcHRpb25zPyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnNtb290aFNjcm9sbC5zY3JvbGxUb0VsZW1lbnQodGhpcy52aWV3cG9ydC5uYXRpdmVFbGVtZW50LCB0YXJnZXQsIG9wdGlvbnMpO1xuICB9XG59XG5cbmludGVyZmFjZSBTY3JvbGxiYXJEcmFnZ2luZyB7XG4gIHZlcnRpY2FsRHJhZ2dpbmc/OiBib29sZWFuO1xuICBob3Jpem9udGFsRHJhZ2dpbmc/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgU2Nyb2xsYmFySG92ZXJlZCB7XG4gIHZlcnRpY2FsSG92ZXJlZD86IGJvb2xlYW47XG4gIGhvcml6b250YWxIb3ZlcmVkPzogYm9vbGVhbjtcbn1cbiJdfQ==