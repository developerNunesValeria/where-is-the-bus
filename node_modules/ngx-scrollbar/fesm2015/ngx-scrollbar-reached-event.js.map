{"version":3,"file":"ngx-scrollbar-reached-event.js","sources":["ng://ngx-scrollbar/reached-event/ng-scrollbar-reached.ts","ng://ngx-scrollbar/reached-event/ng-scrollbar-reached.module.ts","ng://ngx-scrollbar/reached-event/ngx-scrollbar-reached-event.ts"],"sourcesContent":["import { Directive, Optional, Input, Output, OnInit, OnDestroy, NgZone } from '@angular/core';\nimport { Directionality } from '@angular/cdk/bidi';\nimport { RtlScrollAxisType } from '@angular/cdk/platform';\nimport { Observable, Subject, Subscription, Subscriber } from 'rxjs';\nimport { filter, map, tap, distinctUntilChanged } from 'rxjs/operators';\nimport { NgScrollbar } from 'ngx-scrollbar';\n// Uncomment the following line in development mode\n// import { NgScrollbar } from '../../src/public-api';\n\nclass ReachedFunctions {\n  static reachedTop(offset: number, e: any): boolean {\n    return ReachedFunctions.reached(-e.target.scrollTop, 0, offset);\n  }\n\n  static reachedBottom(offset: number, e: any): boolean {\n    return ReachedFunctions.reached(e.target.scrollTop + e.target.clientHeight, e.target.scrollHeight, offset);\n  }\n\n  static reachedStart(offset: number, e: any, direction: 'ltr' | 'rtl', rtlScrollAxisType: RtlScrollAxisType): boolean {\n    if (direction === 'rtl') {\n      if (rtlScrollAxisType === RtlScrollAxisType.NEGATED) {\n        return ReachedFunctions.reached(e.target.scrollLeft, 0, offset);\n      }\n      if (rtlScrollAxisType === RtlScrollAxisType.INVERTED) {\n        return ReachedFunctions.reached(-e.target.scrollLeft, 0, offset);\n      }\n      return ReachedFunctions.reached(e.target.scrollLeft + e.target.clientWidth, e.target.scrollWidth, offset);\n    }\n    return ReachedFunctions.reached(-e.target.scrollLeft, 0, offset);\n  }\n\n  static reachedEnd(offset: number, e: any, direction: 'ltr' | 'rtl', rtlScrollAxisType: RtlScrollAxisType): boolean {\n    if (direction === 'rtl') {\n      if (rtlScrollAxisType === RtlScrollAxisType.NEGATED) {\n        return ReachedFunctions.reached(-(e.target.scrollLeft - e.target.clientWidth), e.target.scrollWidth, offset);\n      }\n      if (rtlScrollAxisType === RtlScrollAxisType.INVERTED) {\n        return ReachedFunctions.reached(-(e.target.scrollLeft + e.target.clientWidth), e.target.scrollWidth, offset);\n      }\n      return ReachedFunctions.reached(-e.target.scrollLeft, 0, offset);\n    }\n    return ReachedFunctions.reached(e.target.scrollLeft + e.target.clientWidth, e.target.scrollWidth, offset);\n  }\n\n  static reached(currPosition: number, targetPosition: number, offset: number): boolean {\n    return currPosition >= targetPosition - offset;\n  }\n}\n\nabstract class ScrollReached implements OnDestroy {\n\n  /** offset: Reached offset value in px */\n  @Input('reachedOffset') offset = 0;\n\n  /**\n   * Stream that emits scroll event when `NgScrollbar.scrolled` is initialized.\n   *\n   * **NOTE:** This subject is used to hold the place of `NgScrollbar.scrolled` when it's not initialized yet\n   */\n  protected scrollEvent = new Subject<any>();\n\n  /** subscription: Scrolled event subscription, used to unsubscribe from the event on destroy */\n  protected subscription = Subscription.EMPTY;\n\n  /** A stream used to assign the reached output */\n  protected reachedEvent = new Observable((subscriber: Subscriber<any>) =>\n    this.scrollReached().subscribe(_ =>\n      Promise.resolve().then(() => this.zone.run(() => subscriber.next(_)))));\n\n  protected constructor(protected scrollbar: NgScrollbar, protected zone: NgZone) {\n    if (!scrollbar) {\n      throw new Error('[NgScrollbarReached Directive]: Host element must be an NgScrollbar component.');\n    }\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n  protected scrollReached(): Observable<any> {\n    // current event\n    let currEvent: any;\n\n    return this.scrollEvent.pipe(\n      tap((e) => currEvent = e),\n      // Check if it scroll has reached\n      map((e) => this.reached(this.offset, e)),\n      // Distinct until reached value has changed\n      distinctUntilChanged(),\n      // Emit only if reached is true\n      filter((reached: boolean) => reached),\n      // Return scroll event\n      map(() => currEvent)\n    );\n  }\n\n  protected abstract reached(offset: number, e?: any): boolean;\n}\n\nabstract class VerticalScrollReached extends ScrollReached implements OnInit {\n  protected constructor(@Optional() protected scrollbar: NgScrollbar, protected zone: NgZone) {\n    super(scrollbar, zone);\n  }\n\n  ngOnInit() {\n    this.subscription = this.scrollbar.verticalScrolled.subscribe(this.scrollEvent);\n  }\n}\n\nabstract class HorizontalScrollReached extends ScrollReached implements OnInit {\n  protected constructor(@Optional() protected scrollbar: NgScrollbar, protected zone: NgZone) {\n    super(scrollbar, zone);\n  }\n\n  ngOnInit() {\n    this.subscription = this.scrollbar.horizontalScrolled.subscribe(this.scrollEvent);\n  }\n}\n\n@Directive({\n  selector: '[reachedTop], [reached-top]',\n})\nexport class NgScrollbarReachedTop extends VerticalScrollReached implements OnInit {\n\n  /** Stream that emits when scroll has reached the top */\n  @Output() reachedTop: Observable<any> = this.reachedEvent;\n\n  constructor(@Optional() protected scrollbar: NgScrollbar, protected zone: NgZone) {\n    super(scrollbar, zone);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n  /**\n   * Check if scroll has reached the top (vertically)\n   * @param offset Scroll offset\n   * @param e Scroll event\n   */\n  protected reached(offset: number, e: any): boolean {\n    return ReachedFunctions.reachedTop(offset, e);\n  }\n}\n\n@Directive({\n  selector: '[reachedBottom], [reached-bottom]',\n})\nexport class NgScrollbarReachedBottom extends VerticalScrollReached implements OnInit {\n\n  /** Stream that emits when scroll has reached the bottom */\n  @Output() reachedBottom: Observable<any> = this.reachedEvent;\n\n  constructor(@Optional() protected scrollbar: NgScrollbar, protected zone: NgZone) {\n    super(scrollbar, zone);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n  /**\n   * Check if scroll has reached the bottom (vertically)\n   * @param offset Scroll offset\n   * @param e Scroll event\n   */\n  protected reached(offset: number, e: any): boolean {\n    return ReachedFunctions.reachedBottom(offset, e);\n  }\n}\n\n@Directive({\n  selector: '[reachedStart], [reached-start]',\n})\nexport class NgScrollbarReachedStart extends HorizontalScrollReached implements OnInit {\n\n  /** Stream that emits when scroll has reached the start */\n  @Output() reachedStart: Observable<any> = this.reachedEvent;\n\n  constructor(@Optional() protected scrollbar: NgScrollbar, protected zone: NgZone, private dir: Directionality) {\n    super(scrollbar, zone);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n  /**\n   * Check if scroll has reached the start (horizontally)\n   * @param offset Scroll offset\n   * @param e Scroll event\n   */\n  protected reached(offset: number, e: any): boolean {\n    return ReachedFunctions.reachedStart(offset, e, this.dir.value, this.scrollbar.manager.rtlScrollAxisType);\n  }\n}\n\n@Directive({\n  selector: '[reachedEnd], [reached-end]',\n})\nexport class NgScrollbarReachedEnd extends HorizontalScrollReached implements OnInit {\n\n  /** Stream that emits when scroll has reached the end */\n  @Output() reachedEnd: Observable<any> = this.reachedEvent;\n\n  constructor(@Optional() protected scrollbar: NgScrollbar, protected zone: NgZone, private dir: Directionality) {\n    super(scrollbar, zone);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n  /**\n   * Check if scroll has reached the end (horizontally)\n   * @param offset Scroll offset\n   * @param e Scroll event\n   */\n  protected reached(offset: number, e: any): boolean {\n    return ReachedFunctions.reachedEnd(offset, e, this.dir.value, this.scrollbar.manager.rtlScrollAxisType);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { BidiModule } from '@angular/cdk/bidi';\nimport { NgScrollbarModule } from 'ngx-scrollbar';\n// Uncomment the following line in development mode\n// import { NgScrollbarModule } from '../../src/public-api';\nimport {\n  NgScrollbarReachedTop,\n  NgScrollbarReachedBottom,\n  NgScrollbarReachedStart,\n  NgScrollbarReachedEnd\n} from './ng-scrollbar-reached';\n\n@NgModule({\n  imports: [\n    NgScrollbarModule,\n    BidiModule\n  ],\n  declarations: [\n    NgScrollbarReachedTop,\n    NgScrollbarReachedBottom,\n    NgScrollbarReachedStart,\n    NgScrollbarReachedEnd\n  ],\n  exports: [\n    NgScrollbarReachedTop,\n    NgScrollbarReachedBottom,\n    NgScrollbarReachedStart,\n    NgScrollbarReachedEnd\n  ]\n})\nexport class NgScrollbarReachedModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}